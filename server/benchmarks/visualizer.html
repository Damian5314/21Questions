<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Provider Benchmark Resultaten</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f7;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
        .content {
            padding: 30px;
        }
        .file-input-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 2px dashed #dee2e6;
            text-align: center;
        }
        .file-input {
            margin: 10px 0;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .stat-card h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .chart-container h3 {
            margin: 0 0 20px 0;
            color: #333;
            text-align: center;
        }
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .results-table th,
        .results-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        .results-table th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }
        .results-table tr:hover {
            background: #f8f9fa;
        }
        .provider-groq {
            color: #FF6B35;
            font-weight: bold;
        }
        .provider-gemini {
            color: #4285F4;
            font-weight: bold;
        }
        .success {
            color: #28a745;
        }
        .error {
            color: #dc3545;
        }
        .hidden {
            display: none;
        }
        .winner-badge {
            background: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ AI Provider Benchmark</h1>
            <p>Groq vs Gemini Performance Analyse</p>
        </div>

        <div class="content">
            <div class="file-input-section">
                <h3>üìä Laad Benchmark Resultaten</h3>
                <p>Selecteer een JSON bestand met benchmark resultaten om de analyse te bekijken</p>
                <input type="file" id="fileInput" accept=".json" class="file-input">
                <div id="fileStatus"></div>
            </div>

            <div id="resultsSection" class="hidden">
                <div class="stats-grid" id="statsGrid">
                    <!-- Stats worden hier dynamisch ingevoegd -->
                </div>

                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>‚ö° Response Tijd Vergelijking</h3>
                        <canvas id="responseTimeChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>üìè Response Lengte</h3>
                        <canvas id="responseLengthChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>üéØ Success Rate</h3>
                        <canvas id="successRateChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>üí¨ Token Gebruik</h3>
                        <canvas id="tokenUsageChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>üìã Gedetailleerde Resultaten</h3>
                    <table class="results-table" id="resultsTable">
                        <thead>
                            <tr>
                                <th>Test Scenario</th>
                                <th>Provider</th>
                                <th>Response Tijd (ms)</th>
                                <th>Tokens</th>
                                <th>Response Lengte</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody">
                            <!-- Resultaten worden hier dynamisch ingevoegd -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        let benchmarkData = null;
        let charts = {};

        document.getElementById('fileInput').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        benchmarkData = JSON.parse(e.target.result);
                        displayResults(benchmarkData);
                        document.getElementById('fileStatus').innerHTML = `<span style="color: green;">‚úÖ Bestand succesvol geladen: ${file.name}</span>`;
                    } catch (error) {
                        document.getElementById('fileStatus').innerHTML = `<span style="color: red;">‚ùå Fout bij laden van bestand: ${error.message}</span>`;
                    }
                };
                reader.readAsText(file);
            }
        });

        function displayResults(data) {
            document.getElementById('resultsSection').classList.remove('hidden');

            displayStats(data.summary);
            displayCharts(data);
            displayTable(data.detailedResults);
        }

        function displayStats(summary) {
            const statsGrid = document.getElementById('statsGrid');
            const groq = summary.groq;
            const gemini = summary.gemini;

            const speedWinner = groq && gemini ? (groq.avgResponseTime < gemini.avgResponseTime ? 'Groq' : 'Gemini') : 'N/A';
            const speedDiff = groq && gemini ? Math.abs(groq.avgResponseTime - gemini.avgResponseTime).toFixed(0) : 0;

            statsGrid.innerHTML = `
                <div class="stat-card">
                    <h3>üèÜ Snelheid Winnaar</h3>
                    <div class="stat-value">${speedWinner} <span class="winner-badge">+${speedDiff}ms sneller</span></div>
                </div>
                <div class="stat-card">
                    <h3>‚ö° Groq Gemiddeld</h3>
                    <div class="stat-value">${groq ? groq.avgResponseTime.toFixed(0) : 'N/A'}ms</div>
                </div>
                <div class="stat-card">
                    <h3>‚ö° Gemini Gemiddeld</h3>
                    <div class="stat-value">${gemini ? gemini.avgResponseTime.toFixed(0) : 'N/A'}ms</div>
                </div>
                <div class="stat-card">
                    <h3>üìä Totaal Tests</h3>
                    <div class="stat-value">${summary.totalTests}</div>
                </div>
                <div class="stat-card">
                    <h3>üéØ Groq Success Rate</h3>
                    <div class="stat-value">${groq ? (groq.successRate * 100).toFixed(1) : 'N/A'}%</div>
                </div>
                <div class="stat-card">
                    <h3>üéØ Gemini Success Rate</h3>
                    <div class="stat-value">${gemini ? (gemini.successRate * 100).toFixed(1) : 'N/A'}%</div>
                </div>
            `;
        }

        function displayCharts(data) {
            const groqData = data.detailedResults.filter(r => r.provider === 'groq' && r.success);
            const geminiData = data.detailedResults.filter(r => r.provider === 'gemini' && r.success);

            // Response tijd chart
            createResponseTimeChart(groqData, geminiData);

            // Response lengte chart
            createResponseLengthChart(groqData, geminiData);

            // Success rate chart
            createSuccessRateChart(data);

            // Token usage chart
            createTokenUsageChart(groqData, geminiData);
        }

        function createResponseTimeChart(groqData, geminiData) {
            const ctx = document.getElementById('responseTimeChart').getContext('2d');

            if (charts.responseTime) charts.responseTime.destroy();

            charts.responseTime = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: groqData.map(r => r.testName),
                    datasets: [{
                        label: 'Groq',
                        data: groqData.map(r => r.responseTime),
                        backgroundColor: 'rgba(255, 107, 53, 0.8)',
                        borderColor: 'rgba(255, 107, 53, 1)',
                        borderWidth: 1
                    }, {
                        label: 'Gemini',
                        data: geminiData.map(r => r.responseTime),
                        backgroundColor: 'rgba(66, 133, 244, 0.8)',
                        borderColor: 'rgba(66, 133, 244, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Response Tijd (ms)'
                            }
                        }
                    }
                }
            });
        }

        function createResponseLengthChart(groqData, geminiData) {
            const ctx = document.getElementById('responseLengthChart').getContext('2d');

            if (charts.responseLength) charts.responseLength.destroy();

            charts.responseLength = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: groqData.map(r => r.testName),
                    datasets: [{
                        label: 'Groq',
                        data: groqData.map(r => r.responseLength),
                        borderColor: 'rgba(255, 107, 53, 1)',
                        backgroundColor: 'rgba(255, 107, 53, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Gemini',
                        data: geminiData.map(r => r.responseLength),
                        borderColor: 'rgba(66, 133, 244, 1)',
                        backgroundColor: 'rgba(66, 133, 244, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Aantal Karakters'
                            }
                        }
                    }
                }
            });
        }

        function createSuccessRateChart(data) {
            const ctx = document.getElementById('successRateChart').getContext('2d');

            if (charts.successRate) charts.successRate.destroy();

            const groqSuccess = data.summary.groq ? data.summary.groq.successRate * 100 : 0;
            const geminiSuccess = data.summary.gemini ? data.summary.gemini.successRate * 100 : 0;

            charts.successRate = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Groq', 'Gemini'],
                    datasets: [{
                        data: [groqSuccess, geminiSuccess],
                        backgroundColor: [
                            'rgba(255, 107, 53, 0.8)',
                            'rgba(66, 133, 244, 0.8)'
                        ],
                        borderColor: [
                            'rgba(255, 107, 53, 1)',
                            'rgba(66, 133, 244, 1)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function createTokenUsageChart(groqData, geminiData) {
            const ctx = document.getElementById('tokenUsageChart').getContext('2d');

            if (charts.tokenUsage) charts.tokenUsage.destroy();

            charts.tokenUsage = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: groqData.map(r => r.testName),
                    datasets: [{
                        label: 'Groq Tokens',
                        data: groqData.map(r => r.tokenInfo.totalTokens),
                        backgroundColor: 'rgba(255, 107, 53, 0.8)',
                        borderColor: 'rgba(255, 107, 53, 1)',
                        borderWidth: 1
                    }, {
                        label: 'Gemini Tokens',
                        data: geminiData.map(r => r.tokenInfo.totalTokens),
                        backgroundColor: 'rgba(66, 133, 244, 0.8)',
                        borderColor: 'rgba(66, 133, 244, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Aantal Tokens'
                            }
                        }
                    }
                }
            });
        }

        function displayTable(results) {
            const tbody = document.getElementById('resultsTableBody');
            tbody.innerHTML = '';

            results.forEach(result => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${result.testName}</td>
                    <td><span class="provider-${result.provider}">${result.provider.toUpperCase()}</span></td>
                    <td>${result.responseTime}ms</td>
                    <td>${result.tokenInfo.totalTokens}</td>
                    <td>${result.responseLength}</td>
                    <td><span class="${result.success ? 'success' : 'error'}">${result.success ? '‚úÖ Success' : '‚ùå Error'}</span></td>
                `;
                tbody.appendChild(row);
            });
        }
    </script>
</body>
</html>